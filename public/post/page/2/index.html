<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | vindurriel</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - vindurriel">
<meta name="author" content="">
<link rel="canonical" href="https://vindurriel.github.io/post/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css" integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn&#43;yY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://vindurriel.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://vindurriel.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://vindurriel.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://vindurriel.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://vindurriel.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://vindurriel.github.io/post/index.xml" title="rss">
<link rel="alternate" hreflang="en" href="https://vindurriel.github.io/post/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://vindurriel.github.io/post/">
  <meta property="og:site_name" content="vindurriel">
  <meta property="og:title" content="Posts">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Posts">
<meta name="twitter:description" content="">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://vindurriel.github.io/post/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://vindurriel.github.io/" accesskey="h" title="vindurriel (Alt + H)">vindurriel</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://vindurriel.github.io/" title="vindurriel">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://vindurriel.github.io/post/" title="Posts">
                    <span class="active">Posts</span>
                </a>
            </li>
            <li>
                <a href="https://vindurriel.github.io/resume_en/" title="Resume">
                    <span>Resume</span>
                </a>
            </li>
            <li>
                <a href="https://vindurriel.github.io/resume/" title="简历">
                    <span>简历</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://vindurriel.github.io/">Home</a></div>
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">forced graph
    </h2>
  </header>
  <div class="entry-content">
    <p>下图是用d3中的forced graph画出的post和tag的关联关系。为了区别post和tag，使用了两种颜色， 并且施加了两个力场，把post向左推，tag向右推。
{% raw %} //准备post和tag的关联数据 var graph={ &#34;nodes&#34;:[], &#34;links&#34;:[], }; var hash_tag={}; var post_id=0,tag_id=0; {% for post in site.posts %} graph.nodes.push({ &#34;name&#34;: &#34;{{ post.title }}&#34;, &#34;url&#34;:&#34;{{post.url}}&#34;, &#34;type&#34;:&#34;post&#34;, }); post_id=graph.nodes.length-1; {% for tag in post.tags %} if(hash_tag[&#34;{{tag}}&#34;]===undefined){ graph.nodes.push({ &#34;name&#34;: &#34;{{ tag }}&#34;, &#34;url&#34;:&#34;/tags.html&#34;, &#34;type&#34;:&#34;tag&#34;, }); tag_id=graph.nodes.length-1; hash_tag[&#34;{{tag}}&#34;]=tag_id; } else { tag_id=hash_tag[&#34;{{tag}}&#34;]; } graph.links.push({ &#34;source&#34;:post_id, &#34;target&#34;:tag_id, &#34;value&#34;:1 }); {% endfor %} {% endfor %} //数据准备完毕，开始画图 var width = 400, height = 400; //两个力场的中心位置 var foci={ &#34;post&#34;:{&#34;x&#34;:0,&#34;y&#34;:height/2}, &#34;tag&#34;:{&#34;x&#34;:width,&#34;y&#34;:height/2}, }; var color = d3.scale.category10(); var force = d3.layout.force() .linkDistance(100) .linkStrength(.3) .gravity(0) .size([width, height]); var svg = d3.select(&#34;#svg&#34;).append(&#34;svg&#34;) .attr(&#34;width&#34;, width) .attr(&#34;height&#34;, height); force .charge(-400) .nodes(graph.nodes) .links(graph.links) .start(); var link = svg.selectAll(&#34;.link&#34;) .data(graph.links) .enter().append(&#34;line&#34;) .attr(&#34;class&#34;, &#34;link&#34;); var node = svg.selectAll(&#34;.node&#34;) .data(graph.nodes) .enter().append(&#34;circle&#34;) .attr(&#34;class&#34;, &#34;node&#34;) .attr(&#34;r&#34;,10) .on(&#34;click&#34;,function(d){ window.open(d.url); }) .style(&#34;cursor&#34;,&#34;pointer&#34;) .style(&#34;fill&#34;, function(d) { return color(d.type); }) .call(force.drag); node.append(&#34;title&#34;) .text(function(d) { return d.name; }); force.on(&#34;tick&#34;, function(e) { link.attr(&#34;x1&#34;, function(d) { return d.source.x; }) .attr(&#34;y1&#34;, function(d) { return d.source.y; }) .attr(&#34;x2&#34;, function(d) { return d.target.x; }) .attr(&#34;y2&#34;, function(d) { return d.target.y; }); //e.alpha是“温度”，粒子的“活性”与之相关，它是一个不断下降的变量，模拟冷却过程。 var k = .5 * e.alpha; //让每个粒子都被力场减速吸向中心，直到温度为0 //同时每个粒子还受到库仑力(由force.charge定义)，从而彼此不会聚合在一起。 graph.nodes.forEach(function(o, i) { o.y &#43;= (foci[o.type].y - o.y) * k; o.x &#43;= (foci[o.type].x - o.x) * k; }); node.attr(&#34;cx&#34;, function(d) { return d.x; }) .attr(&#34;cy&#34;, function(d) { return d.y; }); }); {% endraw %} 效果如下：
...</p>
  </div>
  <footer class="entry-footer"><span title='2013-07-26 00:00:00 +0000 UTC'>July 26, 2013</span></footer>
  <a class="entry-link" aria-label="post link to forced graph" href="https://vindurriel.github.io/post/2013-07-26-forced-graph/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">用d3.js来呈现post-tag的多对多关系
    </h2>
  </header>
  <div class="entry-content">
    <p>最近想用更好的方式呈现blog和tag之间的关系，也就是重写本博客的标签页面。
log和tag之间是多对多的关系，就是说一篇blog可以有多个tag，一个tag可以包含多篇blog。适合表现这种映射关系的图表叫做平行集（Parallel Set）。
平行集是反应两组或以上数据集之间映射关系的图表。
d3是一个用javascript的库，主要用途是用svg做数据可视化。
d3非常强大，基本上能想到的图表都可以实现。而对于平行集，d3有一个插件d3.parsets。
需要添加如下css和js：
d3.parsets.css d3.v3.min.js d3.parsets.js 然后在tags.html里写一些javascript。
先构造出所有post和tag的对应数据。d3.parsets使用csv格式，所以要先生成一个csv格式的字符串。在这里，列名就是post,tag。 比如本篇blog对应两个tag：d3和visualization，那么要在csv里添加两行:
{{ page.title }},d3 {{ page.title }},visualization 相关代码如下：
{%raw%} var csv=&#34;post,tag&#34;; {% for post in site.posts %} {% for tag in post.tags %} csv&#43;=&#34;\n{{post.title}},{{tag}}&#34;; {% endfor %} {% endfor %} {%endraw%} 接着实例化一个chart，再把数据给它：
var chart = d3.parsets() .tension(0.8) .width(&#34;800&#34;) .height(&#34;480&#34;) .dimensions([&#34;tag&#34;,&#34;post&#34;]); var vis = d3.select(&#34;#vis&#34;).append(&#34;svg&#34;) .attr(&#34;width&#34;, chart.width()) .attr(&#34;height&#34;, chart.height()); var parsed_csv=d3.csv.parse(csv); vis.datum(parsed_csv).call(chart); 我还想实现这样一个功能：点击图中的博客时可以跳转到博客页面。
{%raw%} var posts={}; {% for post in site.posts %} posts[&#34;{{post.title}}&#34;]={ &#34;url&#34;:&#34;{{post.url}}&#34;, }; {% endfor %} vis.selectAll(&#34;.category text&#34;).on(&#34;click&#34;,function(d){ if(!(d.name in posts)) return; window.open(posts[d.name].url); }); {%endraw%} d3虽然可以看到很多jQuery的影子， 但在data和view的生成方式上很独特，非常的描述化。 这篇文章是作者自己总结的d3处理数据上的一种模式，也就是所谓的join。
</p>
  </div>
  <footer class="entry-footer"><span title='2013-07-22 00:00:00 +0000 UTC'>July 22, 2013</span></footer>
  <a class="entry-link" aria-label="post link to 用d3.js来呈现post-tag的多对多关系" href="https://vindurriel.github.io/post/2013-07-22-post-tag-diagram-with-d3/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">删除github pages的master分支
    </h2>
  </header>
  <div class="entry-content">
    <p>github pages默认使用两个分支：master和gh-pages。 在两个分支间切换很不方便：在gh-pages写了一些blog， 然后切回master进行一次push，才能让服务器重新build。
但是可以删除master。 首先到github.com的repo设置里面把默认分支设为gh-pages，然后删除master分支，最后回到本地，用 git branch -D master 删除master分支。
但是删除master后，发现远端页面更新非常缓慢，而且页面状态不稳定（有的页面更新了，有的则没有）。因此后来恢复了用两个分支。有文章介绍可以用post commit hook来保持两个分支的一致性。
###update 2013-08-07
写了一个bat脚本，取名push.bat
@echo off rem 提示用户输入comment set /p comment=&#34;comments:&#34; rem 在master分支上commit git commit -am &#34;%comment%&#34; git checkout gh-pages rem rebase命令使得gh-pages和master同步，然后生成一个commit git rebase master git checkout master git push 使用时直接输入push
</p>
  </div>
  <footer class="entry-footer"><span title='2013-07-21 00:00:00 +0000 UTC'>July 21, 2013</span></footer>
  <a class="entry-link" aria-label="post link to 删除github pages的master分支" href="https://vindurriel.github.io/post/2013-07-21-delete-master-branch-on-github-pages/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">github pages 配置
    </h2>
  </header>
  <div class="entry-content">
    <p>首先去github pages申请一个页面，默认的域名是http://USERNAME.github.io，其中USERNAME是你的github用户名。
github使用jekyll做解析引擎。可以直接克隆一个别人写好的jekyll，然后把上传路径改成自己的，像这样：
git clone https://github.com/plusjade/jekyll-bootstrap.git USERNAME.github.com cd USERNAME.github.com git remote set-url origin git@github.com:USERNAME/USERNAME.github.com.git git push origin master 这个例子中使用的是jekyll-bootstrap。
###写文章
如果装了ruby的话，直接在文件夹下执行
rake post title=&#34;a new post&#34; 就可以新建一篇文章。内容支持markdown。
其实就是在_post目录下新建了一个md文件，文件名格式为年-月-日-标题.md。 文件开始是一些元信息，比如本文的md文件开头是这样的：
--- layout: post title: &#34;github pages 配置&#34; description: &#34;rake post title=&amp;quot;a new post&amp;quot; layout: post title: &#34;github pages 配置&#34; description: &#34;&#34; category: misc tags: [jekyll,github pages,setup] 写好了内容部分，直接`git commit`然后`git push`到master分支就可以了。 comments : provider : disqus disqus : short_name : YOUR_DISQUS_SITE_NAME 你需要去disqus.com注册一个用户，然后在dashboard中新建一个站点，注意把`short_name`设置为配置文件中的那个`YOUR_DISQUS_SITE_NAME`。 $ CHCP 65001 如果是在git bash中的话，需要设置如下环境变量： export LC_ALL = enUS.UTF-8 export LANG = enUS.UTF-8 然后就可以 `jekyll serve --watch`了。 gem uninstall pygments.rb --version &amp;quot;&amp;gt;0.5.0&amp;quot; gem install pygments.rb --version &amp;quot;=0.5.0&amp;quot;&#34; category: misc tags: [jekyll,github pages,setup] --- 写好了内容部分，直接git commit然后git push到master分支就可以了。
...</p>
  </div>
  <footer class="entry-footer"><span title='2013-07-19 00:00:00 +0000 UTC'>July 19, 2013</span></footer>
  <a class="entry-link" aria-label="post link to github pages 配置" href="https://vindurriel.github.io/post/2013-07-19-github-pages-setup/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">为gem install 提速
    </h2>
  </header>
  <div class="entry-content">
    <p>编辑.gemrc，内容如下：
:bulk_threshold: 1000 :backtrace: false gemcutter_key: XXXXX gem: --no-ri --no-rdoc :benchmark: false :verbose: true :update_sources: true :sources: - http://gems.rubyforge.org/ - http://gems.opscode.com 主要起作用的是gem: --no-ri --no-rdoc,少下载了很多文档。
</p>
  </div>
  <footer class="entry-footer"><span title='2013-07-19 00:00:00 +0000 UTC'>July 19, 2013</span></footer>
  <a class="entry-link" aria-label="post link to 为gem install 提速" href="https://vindurriel.github.io/post/2013-07-19-gem-acceleration/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Covid Report
    </h2>
  </header>
  <div class="entry-content">
    <p>Data description: Daily new confirmed covid cases of every province in the China mainland area.
Move the slider to see daily data since Feburary 2020. Click on the button to travel through time.
The source: National Health Commitee
Data are updated weekly.
link
</p>
  </div>
  <footer class="entry-footer"><span title='2012-08-08 00:00:00 +0000 UTC'>August 8, 2012</span></footer>
  <a class="entry-link" aria-label="post link to Covid Report" href="https://vindurriel.github.io/post/2022-08-08-covid-report/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://vindurriel.github.io/post/">
      «&nbsp;Prev&nbsp;
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://vindurriel.github.io/">vindurriel</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
