<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Tutorial | vindurriel</title>
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="author" content="">
<link rel="canonical" href="https://vindurriel.github.io/tags/tutorial/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css" integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn&#43;yY=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://vindurriel.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://vindurriel.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://vindurriel.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://vindurriel.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://vindurriel.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://vindurriel.github.io/tags/tutorial/index.xml" title="rss">
<link rel="alternate" hreflang="zh" href="https://vindurriel.github.io/tags/tutorial/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://vindurriel.github.io/tags/tutorial/">
  <meta property="og:site_name" content="vindurriel">
  <meta property="og:title" content="Tutorial">
  <meta property="og:locale" content="zh-CN">
  <meta property="og:type" content="website">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Tutorial">
<meta name="twitter:description" content="">

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://vindurriel.github.io/" accesskey="h" title="vindurriel (Alt + H)">vindurriel</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                    <ul class="lang-switch"><li>|</li>
                        <li>
                            <a href="https://vindurriel.github.io/en/" title="English US ğŸ‡ºğŸ‡¸"
                                aria-label="English US :us:">English US ğŸ‡ºğŸ‡¸</a>
                        </li>
                    </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://vindurriel.github.io/archives/" title="Archive">
                    <span>å­˜æ¡£</span>
                </a>
            </li>
            <li>
                <a href="https://vindurriel.github.io/resume/" title="ç®€å†">
                    <span>ç®€å†</span>
                </a>
            </li>
            <li>
                <a href="https://vindurriel.github.io/index.xml" title="RSS æº">
                    <span>RSS æº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://vindurriel.github.io/">ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href="https://vindurriel.github.io/tags/">Tags</a></div>
  <h1>
    Tutorial
  </h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">ç”¨Pythonåšæ–‡æœ¬æ‘˜è¦
    </h2>
  </header>
  <div class="entry-content">
    <p>æœ¬æ–‡æ˜¯ç³»åˆ—çš„ç¬¬ä¸‰ç¯‡ã€‚
æ–‡æœ¬æ‘˜è¦ ä»¥ä¸‹æ–°é—»æ¥è‡ªé›·é”‹ç½‘
Yahooæ”¶è´­æ–°é—»æ‘˜è¦åº”ç”¨Summly
å®—ä» 2013-03-26 07:53 æ²¡æœ‰è¯„è®º
æ ‡ç­¾ï¼šSummly æ–°é—»æ‘˜è¦
Yahoo æ˜¨æ—¥å®£å¸ƒæ”¶è´­æ–°é—»æ‘˜è¦ç§»åŠ¨å…¬å¸Summlyï¼Œä»·æ ¼å¯èƒ½ä¸º3000ä¸‡ç¾é‡‘ï¼ŒAppæœ¬èº«å…è®¸ä½ å¿«é€Ÿæµè§ˆå’Œåˆ†äº«æ–°é—»ï¼Œåˆ›å§‹äººNick Dâ€™Aloisio17å²ï¼Œæ›¾è·å¾—Horizons Ventures, betaworks, Shakil Khan, Matt Mullenweg, Troy Carterçš„æŠ•èµ„ï¼Œè€Œä¸”è·Ÿæ–°é—»é›†å›¢åˆä½œæ¥é‡‡é›†å†…å®¹ã€‚
Summlyé‡‡ç”¨äº†è‡ªç„¶è¯­è¨€å¤„ç†ç®—æ³•ï¼Œå¯å°†æ–°é—»å†…å®¹æç‚¼ä¸ºä¸è¶³400å­—çš„çŸ­å¥ã€‚ç”¨æˆ·å¯ä»¥å¿«é€Ÿæµè§ˆæ–°é—»è¯é¢˜ï¼Œé‡åˆ°æ„Ÿå…´è¶£çš„å†…å®¹å†ç‚¹å‡»è¿›å…¥åŸå§‹é“¾æ¥é˜…è¯»å…¨æ–‡ã€‚Summlyåœ¨è‹¹æœAppStoreåº”ç”¨å•†åº—ä¸­çš„ä¸‹è½½é‡å·²è¶…è¿‡50ä¸‡æ¬¡ã€‚
è‡ªä»ç›ä¸½èÂ·æ¢…è€¶ï¼ˆMarissaMayerï¼‰ä¸Šä»»CEOåï¼Œé›…è™å‡ ä¹åœ¨ä»»ä½•äº‹æƒ…ä¸Šéƒ½æ¢å¤äº†æ­¥è°ƒã€‚å°±åœ¨äº”å¤©å‰ï¼Œè¯¥å…¬å¸æ”¶è´­äº†ç¤¾äº¤æ¨èå…¬å¸Jybeï¼Œå¹¶è·å¾—äº†éšåŒè¿™æ¬¡æ”¶è´­ä¸€èµ·å›åˆ°å…¬å¸çš„å‰é›…è™èŒå‘˜ã€‚
ä»¥ä¸‹æ˜¯é›…è™åœ¨å…¶å®˜æ–¹åšå®¢ä¸Šå‘å¸ƒçš„å£°æ˜ï¼š
ä»Šå¤©æˆ‘ä»¬å¾ˆé«˜å…´åœ°å‘Šè¯‰å¤§å®¶ï¼Œæˆ‘ä»¬å°†æ”¶è´­Summlyï¼Œä¸€å®¶æœ¬ç€ç®€åŒ–æˆ‘ä»¬è·å¾—ä¿¡æ¯çš„æ–¹å¼ï¼Œä½¿ä¹‹æ›´å¿«ã€æ›´å®¹æ˜“ã€æ›´ç®€å•çš„ç²¾ç¥åˆ›ç«‹çš„ç§»åŠ¨äº§å“å…¬å¸ã€‚
å°¼å…‹Â·å¾·æ´›ä¼Šè¥¿å¥¥åœ¨15å²æ—¶å°±åœ¨ä¼¦æ•¦çš„å®¶ä¸­å¼€å‘äº†Summlyåº”ç”¨ã€‚å…¶å§‹äºä¸€ç§è§è§£â€”â€”æˆ‘ä»¬ç”Ÿæ´»åœ¨ä¸€ä¸ªä¿¡æ¯ä¸–ç•Œé‡Œï¼Œéœ€è¦æ–°çš„æ–¹å¼ç®€åŒ–æˆ‘ä»¬å¯»æ‰¾å¯¹æˆ‘ä»¬å¾ˆé‡è¦çš„æŠ¥é“ï¼Œåªéœ€çœ‹ä¸€çœ¼ã€‚ç§»åŠ¨è®¾å¤‡æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»å’Œå·¥ä½œï¼Œç”¨æˆ·ä¸ä½†æ”¹å˜äº†ä»–ä»¬æ¶ˆè´¹çš„ä¿¡æ¯ï¼Œä¹Ÿæ”¹å˜äº†ä¿¡æ¯çš„æ•°é‡ã€‚
è¿™ç¯‡æ–°é—»æœ‰ä¸¤ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œç¬¬ä¸€ï¼Œæ–‡æœ¬æ‘˜è¦å¾ˆæœ‰ä»·å€¼ï¼›ç¬¬äºŒï¼ŒæŠ€æœ¯ä¸ä¼šå¾ˆéš¾ï¼Œæ¯•ç«Ÿ15å²çš„å­©å­éƒ½å¯ä»¥å¼€å‘ã€‚
ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹åšæ–‡æœ¬æ‘˜è¦çš„å¤§è‡´æ€è·¯ã€‚
å¤§è‡´æ€è·¯ æ–‡æœ¬æ‘˜è¦ é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ‰¾å‡ºä¸€éƒ¨åˆ†é‡è¦çš„å¥å­ã€‚ è¿™å¥è¯æœ‰ä¸‰ä¸ªé€»è¾‘é‡ç‚¹ã€‚
1. æ‰¾å‡ºä¸€éƒ¨åˆ†é‡è¦çš„å¥å­ ä¹Ÿå°±æ˜¯è¯´è¦æŠŠæ–‡ç« åˆ‡æˆå¥å­ã€‚æ¯”è¾ƒç›´è§‚çš„æƒ³æ³•æ˜¯æ ¹æ®æ ‡ç‚¹ç¬¦å·ä»¥åŠç©ºæ ¼ã€æ¢è¡Œç¬¦ç­‰ã€‚æ–­å¥è¿™ä¸ªé—®é¢˜ï¼Œè‹±æ–‡åè€Œæ¯”ä¸­æ–‡è¦å¤æ‚ï¼Œä¾‹å¦‚å¥å·.å’Œå•å¼•å·&#39;éƒ½æ˜¯æœ‰å¤šä¸ªæ„æ€çš„ï¼Œéƒ½ä¸ä¸€å®šèƒ½æ ‡æ˜ä¸€å¥è¯çš„ç»“å°¾ã€‚
2. æ‰¾å‡ºä¸€éƒ¨åˆ†é‡è¦çš„å¥å­ å¦‚ä½•è¡¡é‡ä¸€ç¯‡æ–‡ç« é‡Œçš„æ¯å¥è¯æ˜¯å¦é‡è¦ï¼Ÿæ€æ ·é‡åŒ–è¿™ä¸ªé‡è¦æ€§ï¼Ÿæœ‰ä»¥ä¸‹æ€è€ƒçš„è§’åº¦ã€‚
æ ¹æ®ä½ç½®ï¼ˆæ ‡é¢˜ã€å¯¼è¯­ã€æ®µé¦–æ®µå°¾ï¼‰ ä¸€èˆ¬æ¥è¯´ï¼Œæ–‡ç« å°¤å…¶æ˜¯æ–°é—»çš„æ ‡é¢˜ã€èŠ‚æ ‡é¢˜ã€å¯¼è¯­å’Œæ®µé¦–æ®µå°¾æ¯”è¾ƒé‡è¦ã€‚å¯¹äºhtmlè§£æè€Œè¨€ï¼Œå°±æ˜¯titleã€h1ã€h2ã€aã€strongç­‰æ ‡è®°ä¸­çš„æ–‡å­—æ›´é‡è¦ã€‚
æ ¹æ®å†…å®¹ å†…å®¹æ–¹é¢ï¼Œéœ€è¦æŠŠç²’åº¦ç»†åˆ†åˆ°è¯çš„é‡è¦ç¨‹åº¦ï¼Œå¦‚æœä¸€å¥è¯ä¸­çš„è¯å¾ˆé‡è¦ï¼Œé‚£ä¹ˆè¿™å¥è¯å¾ˆé‡è¦ã€‚
é‚£ä¹ˆå°±æœ‰ä¸‹é¢çš„ä¸¤ä¸ªé—®é¢˜ï¼š
æ€ä¹ˆè·å¾—ä¸€å¥è¯ä¸­çš„è¯ï¼Ÿä¹Ÿå°±æ˜¯åˆ†è¯é—®é¢˜ã€‚
è¯çš„é‡è¦ç¨‹åº¦å¦‚ä½•è¡¡é‡ï¼Ÿ
ä¸‹é¢åˆ†åˆ«æ¥ä»‹ç»è¿™ä¸¤ä¸ªé—®é¢˜ã€‚
2.1 åˆ†è¯ å°±æ˜¯åœ¨è¯ä¸è¯ä¹‹é—´æ’å…¥æ ‡è®°ï¼Œä¸€èˆ¬æ˜¯ç©ºæ ¼ã€‚è‹±æ–‡æ–‡æœ¬ä¸éœ€è¦è¿™ä¸€æ­¥ï¼Œæœ¬æ¥å°±æœ‰ç©ºæ ¼ã€‚ä½†ä¸­æ–‡æ²¡æœ‰ï¼Œè€Œä¸”ä¸€è¯å¤šä¹‰ç°è±¡å¾ˆå¤šï¼Œ è¯­æ³•ç»“æ„è¿˜ä¼šéšç€è¯çš„ä½ç½®è€Œå˜åŒ–ï¼Œå› æ­¤ä¸­æ–‡åˆ†è¯æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‹¬ç‰¹çš„é—®é¢˜ã€‚
ä½†æ˜¯ä¸­æ–‡åˆ†è¯å’Œè¯­éŸ³è¯†åˆ«å¾ˆåƒï¼Œå› ä¸ºè¯­éŸ³ä¿¡å·åœ¨è¯ä¸è¯ä¹‹é—´ä¹Ÿæ˜¯æ²¡æœ‰ç©ºæ ¼çš„ï¼Œå› æ­¤å¯å…±ç”¨æŠ€æœ¯ï¼ˆHMMï¼ŒCRFï¼‰ã€‚
Pythonæ¯”è¾ƒå¥½çš„ä¸­æ–‡åˆ†è¯å·¥å…·æœ‰ï¼š
ç»“å·´åˆ†è¯
geniusåˆ†è¯
2.2 è¯çš„é‡è¦ç¨‹åº¦å¦‚ä½•è¡¡é‡ï¼Ÿ è¯é¢‘ï¼ˆTFï¼‰ éœ€è¦å»æ‰è¯é¢‘å¤ªé«˜çš„è¯ï¼ˆåœç”¨è¯ï¼‰
å›ºå®šæ­é…çš„é¢‘ç‡ N-Gram
è¯æ€§ åè¯ã€åŠ¨è¯ä¸€èˆ¬æ¯”å‰¯è¯ã€å½¢å®¹è¯é‡è¦
ä¸“ä¸šè¯å…¸&#43;æ–‡ç« åˆ†ç±»ä¿¡æ¯ æœ‰äº†ä¸“ä¸šè¯å…¸ä»¥åŠæ–‡ç« åˆ†ç±»çš„æ•°æ®ï¼Œå°±å¯ä»¥ç”¨æ›´é«˜çº§çš„ç»Ÿè®¡å·¥å…·ï¼Œç”šè‡³æ˜¯ä¿¡æ¯è®ºçš„çŸ¥è¯†ï¼Œåˆ©ç”¨è¯åœ¨ä¸åŒç±»åˆ«å’Œé¢†åŸŸä¸­çš„åˆ†å¸ƒå·®å¼‚ä»¥åŠæƒé‡ï¼Œ è®¡ç®—è¯å¯¹æ–‡ç« çš„äº’ä¿¡æ¯ã€‚è¿™æ–¹é¢ç®€å•çš„æ–¹æ³•æœ‰TF-IDFï¼Œç›¸å¯¹å¤æ‚çš„æ–¹æ³•æœ‰LDAï¼ˆä¸»é¢˜è¯çš„æå–ï¼‰ã€‚
3. æ‰¾å‡ºä¸€éƒ¨åˆ†é‡è¦çš„å¥å­ éœ€è¦æ ¹æ®é‡è¦æ€§å¯¹å¥å­è¿›è¡Œä¸€ä¸ªæ’åºï¼Œé€‰å‡ºæ’åé å‰çš„ï¼ŒåŠ å…¥æœ€åçš„æ‘˜è¦ã€‚æœ€åï¼Œæœ€å¥½èƒ½æ¢å¤å¥å­åŸæœ‰çš„é¡ºåºï¼Œä»¥ä¾¿äººä»¬é˜…è¯»å’Œç†è§£ã€‚
åˆ°åº•è¦å‡ å¥ï¼Ÿæ‘˜è¦çš„é•¿åº¦åº”è¯¥æ˜¯å¯ä»¥å‚æ•°åŒ–çš„ï¼Œç­–ç•¥å¯ä»¥é‡‡å–æœ€å°‘ä¸€å¥ï¼Œæœ€å¤šNå¥ï¼ŒNæ˜¯å‚æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨ç™¾åˆ†æ¯”æ¥å®šä¹‰ï¼Œå³æ–‡ç« æ€»å¥æ•°çš„x%ï¼Œxä¸ºå‚æ•°ã€‚
ç¤ºä¾‹4 ä¸€ä¸ªç®€å•çš„æ–‡æœ¬æ‘˜è¦çš„pythonå®ç° # encoding=utf-8 from collections import defaultdict frequencies=defaultdict(int) stop_words=set() DISPLAY_FULLTEXT=False SUMMARY_RATIO= 0.1 def init_stopwords(): global stop_words stop_words= set(u&#34;where the of is and to in that we for an are by be as on with can if from which you it this then at have all not one has or that&#34;.split()) file_stopwords=&#34;stop_words.txt&#34; import os if os.path.isfile(file_stopwords): lines=file(file_stopwords,&#39;r&#39;).read().split(&#34;\n&#34;) stop_words=stop_words | set(lines) def split_to_sentences(text): &#39;&#39;&#39;Very simple spliting to sentences by [.!?] and paragraphs. In real life we&#39;ll be much more fancy. &#39;&#39;&#39; import nltk.data tokenizer = nltk.data.load(&#39;tokenizers/punkt/english.pickle&#39;) text =&#34;\n\n&#34;.join(tokenizer.tokenize(text)) import re sentences=[] start = 0 for match in re.finditer(u&#39;(\s*[ã€‚ï¼Ÿï¼]\s*)|(\n{2,})&#39;, text): sentences.append(text[start:match.end()].strip()) start = match.end() sentences=filter(lambda x:len(x)&gt;2,sentences) return sentences def tokenize(text): &#39;&#39;&#39;tokenize using jieba &#39;&#39;&#39; import jieba return jieba.cut(text) def token_frequency(text): &#39;&#39;&#39;Return frequency (count) for each token in the text&#39;&#39;&#39; res = defaultdict(int) for token in tokenize(text): res[token] &#43;= 1 return res def sentence_score(sentences): &#39;&#39;&#39;get sentence score using word frequencey&#39;&#39;&#39; global frequencies,stop_words if not len(stop_words): init_stopwords() scores=[] import math num_sentences=len(sentences) len_sentences=map(len,sentences) max_len_sentences=max(len_sentences) min_len_sentences=min(len_sentences) for i,sentence in enumerate(sentences): tokens=tokenize(sentence) #è¯é¢‘çš„å’Œï¼Œå»æ‰åœç”¨è¯ score= sum((frequencies[token] for token in tokens if token not in stop_words)) #å‰Šå¼±å¥å­é•¿åº¦çš„å½±å“ length_factor=1-1.0*(len_sentences[i]-min_len_sentences)/max_len_sentences score*=length_factor #å¢åŠ å¥å­ä½ç½®çš„å½±å“(è¶Šé å‰è¶Šå¥½) position_factor=1-0.3*i/num_sentences score*=position_factor scores.append(score) return scores def create_summary(sentences): global frequencies summary = [] import math len_sentence=int(math.ceil(len(sentences)*SUMMARY_RATIO)) len_sentence=max(len_sentence,1) len_sentence=min(len_sentence,10) score=sentence_score(sentences) score=[(i,s) for i,s in enumerate(score)] #æ ¹æ®å¾—åˆ†æ’åº score.sort(key=lambda s:s[1],reverse=1) #å–å‡ºå¾—åˆ†é å‰çš„å¥å­ score=score[:len_sentence] #æ¢å¤åŸæ¥å¥å­çš„é¡ºåº score.sort(key=lambda s:s[0]) summary=[sentences[x[0]] for x in score] return set([x[0] for x in score]) # return &#39;\n&#39;.join(summary) def decode_text(text): for x in [&#39;utf-8&#39;,&#39;gbk&#39;]: try: return text.decode(x) except Exception, e: pass raise Exception(&#39;cannot decode using all codings&#39;) def summarize(text): global frequencies text=decode_text(text) frequencies = token_frequency(text) sentences = split_to_sentences(text) if not len(sentences): return ([],set()) index = create_summary(sentences) return (sentences,index) if __name__ == &#39;__main__&#39;: from colorize import Color clr = Color() s=file(&#39;test.txt&#39;,&#39;r&#39;).read() sentences,index=summarize(s) for i,sentence in enumerate(sentences): s=sentence.encode(&#39;gbk&#39;) if i in index: print s # clr.print_red_text(s) elif DISPLAY_FULLTEXT: print s print sorted(list(index)) æ€è€ƒé¢˜3 è¯·ä»å¥å­çš„ä½ç½®å’Œå†…å®¹ä¸¤æ–¹é¢å…¥æ‰‹ï¼Œæ€è€ƒå¦‚ä½•æ”¹è¿›ä¸Šé¢ç®€å•æ–‡æœ¬æ‘˜è¦ç¨‹åºçš„è¡¨ç°ã€‚
</p>
  </div>
  <footer class="entry-footer"><span title='2014-03-26 00:00:00 +0000 UTC'>2014å¹´3æœˆ26æ—¥</span></footer>
  <a class="entry-link" aria-label="post link to ç”¨Pythonåšæ–‡æœ¬æ‘˜è¦" href="https://vindurriel.github.io/post/2014-03-26-python-3/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Python web api
    </h2>
  </header>
  <div class="entry-content">
    <p>æœ¬æ–‡æ˜¯ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚
restæœåŠ¡ è¿™é‡Œæœ‰ç®€ä»‹
json Json
Jsonä¸pojo
Pythonå¤„ç†jsonçš„åº“ import json #åŸºæœ¬åº“ import simplejson #éœ€ç”¨pipå®‰è£… Json-&gt;python objectï¼š
json.loads(string_of_json) Python object-&gt;json:
Json.dumps(json, indent=2) #indentä¸ºç¼©è¿›ç©ºæ ¼æ•° Requestsï¼šhttp for humans è¿™é‡Œæœ‰ä¸­æ–‡ç®€ä»‹
ä¸ªäººè®¤ä¸ºï¼Œrequestsæ˜¯å¯¹Pythonä»·å€¼è§‚æœ€å¥½çš„ä½“ç°ã€‚
ç¤ºä¾‹2 pm2.5 é—®é¢˜ï¼šå¯»æ‰¾å¯ç”¨çš„apiï¼Œè·å–åŸå¸‚çš„pm2.5åŠç©ºæ°”è´¨é‡æ•°æ®
çŸ¥è¯†ç‚¹ï¼šç”¨requestså†™restå®¢æˆ·ç«¯
å­é—®é¢˜1ï¼šå¯»æ‰¾å¯ç”¨çš„api
é€šè¿‡googleï¼Œæ‰¾åˆ°è¿™ä¸ªæœ‰æ€åº¦çš„ç½‘ç«™ å­é—®é¢˜2ï¼š ä½¿ç”¨api
å­é—®é¢˜3ï¼šç»“æœç¼“å­˜ä¸å®šæ—¶è·å–
ä»£ç å¦‚ä¸‹
# encoding=utf-8 u&#39;&#39;&#39; pm25.py Usage: pm25.py &lt;cityname&gt; Options: &lt;cityname&gt; åŸå¸‚å &#39;&#39;&#39; from docopt import docopt def wget_pm25(city): token=&#34;5j1znBVAsnSf5xQyNQyq&#34; import requests as r result=r.get(&#34;http://www.pm25.in/api/querys/pm2_5.json&#34;,params={ &#34;city&#34;:city, &#34;token&#34;:token, }) return result.json() def needs_refresh(filename,timeout=3600): return False import os,time mtime=os.path.getmtime(filename) now=time.time() return now-mtime&gt;timeout def get_pm25(city): filename=&#39;pm25.data.{}.json&#39;.format(city) import os,json data=None if os.path.isfile(filename) and not needs_refresh(filename): data=file(filename,&#39;r&#39;).read() data=json.loads(data) else: data=wget_pm25(city) if type(data)==type({}): print data[&#39;error&#39;] return -1 else: file(filename,&#39;w&#39;).write(json.dumps(data,indent=2)) return data[-1][&#34;pm2_5&#34;] if __name__ == &#39;__main__&#39;: args=docopt(__doc__) cities=args[&#39;&lt;cityname&gt;&#39;] print get_pm25(args[&#39;&lt;cityname&gt;&#39;]) ç¤ºä¾‹3 ä½¿ç”¨flask-restæ­å»ºrestæœåŠ¡ flask-rest æ˜¯ä¸€ä¸ªä½¿ç”¨flashæ¡†æ¶æ­å»ºrestæœåŠ¡çš„å·¥å…·ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š
...</p>
  </div>
  <footer class="entry-footer"><span title='2014-03-25 00:00:00 +0000 UTC'>2014å¹´3æœˆ25æ—¥</span></footer>
  <a class="entry-link" aria-label="post link to Python web api" href="https://vindurriel.github.io/post/2014-03-26-python-2/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Python åˆæ¢
    </h2>
  </header>
  <div class="entry-content">
    <p>æœ€è¿‘åœ¨å…¬å¸åšäº†ä¸€äº›pythonçš„æŠ€æœ¯åˆ†äº«ï¼Œéƒ½æ˜¯æ¯”è¾ƒåŸºç¡€çš„ä¸œè¥¿ï¼Œç”¨åˆ°çš„ä¸€äº›é¢˜æè¿˜æŒºæœ‰æ„æ€çš„ï¼Œå’Œå¤§å®¶åˆ†äº«ã€‚
æœ¬æ–‡æ˜¯ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ã€‚ ç¬¬äºŒç¯‡ï¼šPython web api ç¬¬ä¸‰ç¯‡ï¼šç”¨Pythonåšæ–‡æœ¬æ‘˜è¦
èµ·æº ä½œè€… Guido Van Rossum (GvR)
â€œä»æ…ˆçš„ç»ˆèº«ç‹¬è£è€…â€
å¾—å â€œ1989å¹´12æœˆï¼Œæˆ‘åœ¨å¯»æ‰¾ä¸€é—¨â€œè¯¾ä½™â€ç¼–ç¨‹é¡¹ç›®æ¥æ‰“å‘åœ£è¯èŠ‚å‰åçš„æ—¶é—´ã€‚æˆ‘çš„åŠå…¬å®¤ä¼šå…³é—¨ï¼Œä½†æˆ‘æœ‰ä¸€å°å®¶ç”¨ç”µè„‘ï¼Œè€Œä¸”æ²¡æœ‰å¤ªå¤šå…¶å®ƒä¸œè¥¿ã€‚æˆ‘å†³å®šä¸ºå½“æ—¶æˆ‘æ­£æ„æ€çš„ä¸€ä¸ªæ–°çš„è„šæœ¬è¯­è¨€å†™ä¸€ä¸ªè§£é‡Šå™¨ï¼Œå®ƒæ˜¯ ABC è¯­è¨€çš„åä»£ï¼Œå¯¹ UNIX / C ç¨‹åºå‘˜ä¼šæœ‰å¸å¼•åŠ›ã€‚ä½œä¸ºä¸€ä¸ªç•¥å¾®æœ‰äº›æ— å…³æƒ³æ³•çš„äººï¼Œå’Œä¸€ä¸ªè’™æÂ·æ´¾æ£®ï¼ˆMonty Pythonï¼‰çš„é£è¡Œé©¬æˆå›¢çš„ç‹‚çƒ­çˆ±å¥½è€…ï¼Œæˆ‘é€‰æ‹©äº† Python ä½œä¸ºé¡¹ç›®çš„æ ‡é¢˜ã€‚â€
æ¯ä¸ªäººéƒ½ä¼š 1999å¹´ï¼ŒGuidoå‘DARPAé˜è¿°Pythonè¯­è¨€çš„ç‰¹æ€§ï¼š
ç®€å•ã€ç›´è§‚ã€å¼ºå¤§ å¼€æºï¼Œä»¥ä¾¿ä»»ä½•äººéƒ½å¯ä»¥ä¸ºå®ƒåšè´¡çŒ® ä»£ç åƒçº¯è‹±è¯­é‚£æ ·å®¹æ˜“ç†è§£ é€‚ç”¨äºçŸ­æœŸå¼€å‘çš„æ—¥å¸¸ä»»åŠ¡ è¿™äº›æƒ³æ³•ä¸­çš„ä¸€äº›å·²ç»æˆä¸ºç°å®ã€‚Python å·²ç»æˆä¸ºä¸€é—¨æµè¡Œçš„ ç¼–ç¨‹è¯­è¨€ï¼Œå°¤å…¶æ˜¯åœ¨äº’è”ç½‘ç¯å¢ƒä¸‹ã€‚
ç‰¹æ€§ äº¤äº’å¼å‘½ä»¤è¡Œ(Interactive console) Pythonå¯ä»¥å•æ­¥ç›´è¯‘è¿è¡Œã€‚è¿è¡ŒPythonè§£é‡Šå™¨è¿›å…¥äº¤äº’å¼ã€‚
å‘½ä»¤è¡Œçš„ç¯å¢ƒï¼Œä½ å¯ä»¥åœ¨æç¤ºç¬¦å·Â»&gt;æ—è¾“å…¥ä»£ç ï¼ŒæŒ‰Enteré”®è¾“å‡ºç»“æœï¼š
&gt;&gt;&gt;print(&#34;Hello, Python!&#34;) Hello, Python! æœ‰ç‚¹åƒShell è„šæœ¬çš„æ‰§è¡Œæ–¹å¼ã€‚
ä¸åªæ˜¯è„šæœ¬ â€œè„šæœ¬è¯­è¨€â€å¦‚Linux shell scriptã€windows batch fileç­‰ï¼Œåªèƒ½å¤„ç†ç®€å•çš„ä»»åŠ¡ã€‚
è€ŒPythonæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOP)çš„ï¼Œæ”¯æŒå¼‚å¸¸å¤„ç†å’Œç±»å‹æ£€æŸ¥ã€‚Pythonçš„æ”¯æŒè€…è¾ƒå–œæ¬¢ç§°å®ƒä¸ºä¸€ç§é«˜é˜¶åŠ¨æ€ç¼–ç¨‹è¯­è¨€
å¼ºå¤§æ˜“ç”¨çš„æ ‡å‡†åº“ æ ¸å¿ƒåº“ä¸è¶…è¿‡10Mb
Htmlã€Xmlè§£æï¼šBeautifulSoup, Expat
å­—ç¬¦ä¸²å¤„ç†ï¼šå­—å…¸ã€æ•°ç»„åˆ‡ç‰‡ã€æ­£åˆ™è¡¨è¾¾å¼ re
å•å…ƒæµ‹è¯•ï¼š PyUnit
ä»£ç ç‰ˆæœ¬æ§åˆ¶ï¼š PySVN
ç½‘ç»œè®¿é—®ï¼š urllib2
å›¾å½¢æ¨¡å—ï¼š Tkinterã€PyTCLã€WxPython
ä¸²è¡ŒåŒ–ã€å¤šçº¿ç¨‹ç­‰
æ‰©å±•æ ‡å‡†åº“ååˆ†å®¹æ˜“
èƒ¶æ°´è¯­è¨€(glue language) Pythonç»å¸¸ç”¨ä½œå°†ä¸åŒè¯­è¨€ç¼–å†™çš„ç¨‹åºâ€œç²˜â€åœ¨ä¸€èµ·çš„èƒ¶æ°´è¯­è¨€ã€‚ Googleå†…éƒ¨çš„å¾ˆå¤šé¡¹ç›®ä½¿ç”¨C&#43;&#43;ç¼–å†™æ€§èƒ½è¦æ±‚æé«˜çš„éƒ¨åˆ†ï¼Œç„¶åç”¨Pythonè°ƒç”¨ç›¸åº”çš„æ¨¡å—ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2014-03-24 00:00:00 +0000 UTC'>2014å¹´3æœˆ24æ—¥</span></footer>
  <a class="entry-link" aria-label="post link to Python åˆæ¢" href="https://vindurriel.github.io/post/2014-03-26-python-1/"></a>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://vindurriel.github.io/">vindurriel</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
